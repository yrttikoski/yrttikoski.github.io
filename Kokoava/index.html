<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Brain Gloss</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
</head>

<body>

    <!-- Navigaatio -->
    <nav class="navbar navbar-expand-lg navbar-dark shadow-sm fixed-top"
        style="background-color: rgba(49, 45, 47, 0.95);">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand fw-bold" href="index.html">BrainGloss ✨
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!--Sivut-->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item"><a class="nav-link" href="index.html">Main Page</a></li>
                    <li class="nav-item"><a class="nav-link" href="gloss.html">Behind the Gloss</a></li>
                    <li class="nav-item"><a class="nav-link" href="recommends.html">Recommend a book</a></li>
                </ul>

                <!--Lukulista-->
                <a href="list.html" class="btn btn-outline-danger">
                    <i class="bi bi-heart-fill me-1"></i>
                    Reading list
                </a>
            </div>
        </div>
    </nav>

    <!--Otsikko ja quotes-->
    <header class="hero-header py-5 ">
        <div class="container px-4 px-lg-5 my-5 text-center text-light">
            <h1 class="display-5 bg-dark bg-opacity-50 d-inline-block px-3 py-2 rounded-0">Smart, Sassy & Seriously
                Curious</h1>
            <p id="quote" class="quote bg-dark bg-opacity-50 d-inline-block px-3 py-2 rounded-0"></p>
        </div>
    </header>

    <script>
        // Quotes -tekstit, jotka sivulla pyörii
        const quotes = [
            "“The ability to observe without evaluating is the highest form of intelligence ” — J. Krishnamurti",
            "“By the way, intelligence to me isn't just being book-smart or having a college degree; it's trusting your gut instincts, being intuitive, thinking outside the box, and sometimes just realizing that things need to change and being smart enough to change it.”  — Tabatha Coffey",
            "“Genius might be the ability to say a profound thing in a simple way.” — Charles Bukowski",
            "“Many highly intelligent people are poor thinkers. Many people of average intelligence are skilled thinkers. The power of a car is separate from the way the car is driven.” — Edward de Bono",
            "“The first method for estimating the intelligence of a ruler is to look at the men he has around him.” — Niccolo Machiavelli"
        ];

        function showQuote() {
            const day = new Date().getDate();
            const quoteIndex = day % quotes.length;
            const quoteEl = document.getElementById("quote");

            // Kuinka näkyy sivulla
            quoteEl.style.opacity = 0;
            setTimeout(() => {
                quoteEl.textContent = quotes[quoteIndex];
                quoteEl.style.opacity = 1;
            }, 200);
        }

        // Näytetään heti
        showQuote();
    </script>

    <!--Sivun sisätö-->
    <br>
    <br>
    <div class="text-center mb-4">
        <p>Time to gloss your brain with knowledge. ❤️ Browse through my favorite books below — search by author or
            title.</p>
        <br>
        <!--Hakukenttä-->
        <label for="searchInput" class="visually-hidden">Haku</label>
        <input type="text" id="searchInput" class="form-control w-50 mx-auto"
            placeholder="for example: Aurelius / Meditations" />
    </div>
    <section class="py-5">
        <div class="container px-4 px-lg-5 mt-1">
            <h2 class="text-center mb-4">My top picks</h2>
            <br>
            <!--Korttien asettelua-->
            <!-- Valitut kirjat tulevat tähän JavaScriptin kautta-->
            <div id="book-list-selected"
                class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
            </div>
        </div>
    </section>

    <script>
        // Hakuominaisuuden toiminnot
        const searchInput = document.getElementById("searchInput");
        searchInput.addEventListener("input", () => {
            const term = searchInput.value.toLowerCase();
            const cards = document.querySelectorAll("#book-list-selected .card");

            cards.forEach((card) => {
                const title = card.querySelector("h5").textContent.toLowerCase();
                const author = card.querySelector("p").textContent.toLowerCase();

                // Jos hakusana esiintyy kortilla, näytetään ko. kirja
                if (title.includes(term) || author.includes(term)) {
                    card.parentElement.style.display = "block";
                } else {
                    card.parentElement.style.display = "none";
                }
            });
        });

        // Omat kirjat jotka haluan näkyvän sivulla
        const selectedBooks = [
            "Laws of Human Nature",
            "Kalevala",
            "Bible",
            "Meditations",
            "Emotional Intelligence",
            "The Prince",
            "Odyssey",
            "Das Capital",
            "Atomic Habits",
            "Le Petit Prince",
            "Crime and Punishment",
            "Thinking fast and slow",
            "The Great Gatsby",
            "7 habits of highly effective people",
            "Uzumaki",
            "Jane Eyre",
        ];

        const selectedContainer = document.getElementById("book-list-selected");

        // Haetaan kirjan tiedot
        async function fetchBookData(title) {
            const response = await fetch(`https://openlibrary.org/search.json?title=${encodeURIComponent(title)}`);
            const data = await response.json();
            return data.docs[0]; // Otetaan ensimmäinen osuma
        }

        // Näytetään valitut kirjat
        async function displaySelectedBooks() {
            for (const title of selectedBooks) {
                const book = await fetchBookData(title);
                if (!book) continue;

                const coverId = book.cover_i;
                const imgSrc = coverId
                    ? `https://covers.openlibrary.org/b/id/${coverId}-M.jpg`
                    : "https://via.placeholder.com/450x300?text=Ei+kantta";

                const card = document.createElement("div");
                card.className = "col mb-5";
                card.innerHTML = `
      <div class="card h-100 shadow-sm">
        <img class="card-img-top" src="${imgSrc}" alt="${book.title}" />
        <div class="card-body p-4 text-center">
          <h5 class="fw-bolder">${book.title}</h5>
          <p class="text-muted">${book.author_name ? book.author_name[0] : "Tuntematon tekijä"}</p>
          <button class="btn btn-outline-dark btn-fav" data-title="${book.title}">
            <i class="bi bi-heart"></i> Add to list
          </button>
        </div>
      </div>
    `;
                selectedContainer.appendChild(card);
            }

            setupFavorites();
        }

        displaySelectedBooks();

        // Säilötään suosikit
        function setupFavorites() {
            const buttons = document.querySelectorAll(".btn-fav");
            const saved = JSON.parse(localStorage.getItem("favorites")) || [];

            buttons.forEach((btn) => {
                const title = btn.dataset.title;

                if (saved.includes(title)) {
                    btn.classList.add("btn-danger");
                    btn.innerHTML = '<i class="bi bi-heart-fill"></i> Added to list';
                }

                btn.addEventListener("click", () => {
                    let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
                    if (favorites.includes(title)) {
                        favorites = favorites.filter((t) => t !== title);
                        btn.classList.remove("btn-danger");
                        btn.innerHTML = '<i class="bi bi-heart"></i> Add to list';
                    } else {
                        favorites.push(title);
                        btn.classList.add("btn-danger");
                        btn.innerHTML = '<i class="bi bi-heart-fill"></i> Added to list';
                    }
                    localStorage.setItem("favorites", JSON.stringify(favorites));
                });
            });
        }

        setupFavorites();
    </script>

    <!--Footer-->
    <footer class="footer">
        <p>© 2025 BrainGloss ✨</p>
    </footer>

    <!--Sivun tyylittelyä-->
    <style>
        .quote {
            font-style: italic;
            color: #ffffff;
            font-size: 1.4rem;
            margin-top: 0.5rem;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .hero-header {
            padding-top: 100px !important;
            background-image: url('https://images.unsplash.com/photo-1736597817314-387e3d0d0bb8?q=80&w=699&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            /*Taustakuva*/
            background-size: cover;
            /*Kuva täyttö*/
            background-position: center;
            /*Kuva keskitys*/
            background-repeat: no-repeat;
            color: #f5f5f5;
            position: relative;
        }

        /*Hakukentän saavutettavuus korjaus*/
        .visually-hidden {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          border: 0;
        }
        
        /*Footer asetukset*/
        .footer {
            background: #312d2f;
            color: #f5f5f5;
            text-align: center;
            padding: 1.5rem;
            font-family: "Poppins", sans-serif;
            font-size: 0.9rem;
            border: 1px solid #312d2f;
        }

        /*Navigaatio*/
        .navbar {
            background-color: #312d2f;
            color: #f5f5f5;
            text-align: center;
            padding: 1.5rem;
            font-family: "Poppins", sans-serif;
            font-size: 0.9rem;
            border: 1px solid #312d2f;
            ;
        }

        /*Tausta*/
        body {
            background-color: rgb(90, 83, 87);
            color: #f1e8ff;
        }

        /*Kortit*/
        .card,
        .card-body,
        .card h5,
        .card p,
        .card button {
            background-color: #312d2f;
            color: #ffffff;
            border: 1px solid #312d2f;
            color: #ffffff !important;
            border-radius: 0 !important;
        }

        .card-img-top {
            width: 100%;
            /*Täyttää kortin leveyden*/
            height: 400px;
            /*Sama korkeus kaikille*/
            object-fit: cover;
            /*Pitää mittasuhteet*/
        }


        /*Hakukenttä*/
        #searchInput {
            border-radius: 0 !important;
        }

        /*Pyöristys pois reading -listiltä*/
        a.btn-outline-danger {
            border-radius: 0 !important;
        }
    </style>

    <!--Hampurilaisvalikko-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
    </script>

</body>

</html>
